function createTextButton(e,i,t,n,o){var r=div({"border-radius":"2px","background-color":"#ff8c00",border:"none",color:"white",padding:"2px 14px 4px 11px","text-align":"center","text-decoration":"none",display:"inline-block","font-size":"1.0em",margin:"4px 0px",cursor:"pointer"}).bgColor(e);r.hovered("background-color",i,1);t=div(t).inlineBlock().vAlignMiddle(),e=icon_arrow_start(17,17,e).marginRight(4).vAlignMiddle();return n&&e.attr("transform","rotate(180)"),is(o)&&r.onclick(o),r.append(e,t),r}function popupMenuButton(e,i,t){isUndefined(t)&&(t=!0);var n=1;void 0!==e&&null!=e&&(n=e);var o=div({display:"none",position:"fixed","z-index":"30"}),r=!1,l=div({cursor:"pointer"});return l.onclick(function(e){!function(e){{var i;e?(o.show(),2==n?o.left(l.offsetLeft()-(o.width()-l.width())):3==n?o.left(l.offsetLeft()):o.left(l.offsetLeft()-.5*(o.width()-l.width())),i=t?(i=l.offsetTop()+l.height(),Math.max(i,0)):(i=l.offsetTop()-o.height(),Math.min(i,screen.height-o.height())),o.top(i)):o.hide()}r=e}(!r)}),addTapEvent(function(e){0==(l.element.contains(e.target)||o.element.contains(e.target))&&(o.hide(),r=!1)}),void 0!==i&&null!=i&&o.append(i),o.toBody(),l}function finder_fileDetail(){initBlocks();var e=new Date;this.date=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),this.fileIndex=0;var c=this,e="dodgerblue";block("file information").textAlign("center").bgColor("#333").color("white"),space(4);block("name:").textAlign("left").color(e);space(2),block(),this.elTitleBox=item(textarea("")).fontSize(12),this.elTitleBox.width("96%").attr("rows",3).css("resize","none"),block("description:").textAlign("left").color(e),space(2),block(),this.elDescriptionBox=item(textarea("")).fontSize(12),this.elDescriptionBox.width("96%").attr("rows",10).css("resize","none"),block("modified:").textAlign("left").color(e),space(2);var l=block(this.date).fontSize(9);block("resources:").textAlign("left").color(e),space(2);var d={};this.arrLibraryUrls=[],this.arrLibraryType=[],this.arrLibraryDivs=[],this.deleteLibrary,this.insertLibrary=function(e,i){var t=c.arrLibraryUrls.length,n=div().fontSize("0.5em").textAlign("left"),o=icon_Delete(12,12,null).floatLeft().margin(0,3);n.append(o),n.onclick(function(){c.arrLibraryType[t];confirm("delete? \n( "+e+" )")&&(is(c.deleteLibrary)&&c.deleteLibrary(e),c.arrLibraryDivs[t].remove(),delete c.arrLibraryUrls[t],delete c.arrLibraryDivs[t],delete c.arrLibraryType[t])}),n.element.innerHTML+=e,c.arrLibraryUrls.push(e),c.arrLibraryType.push(i),c.arrLibraryDivs.push(n),c.elMain.append(n)},this.refreshLibraryUrls=function(e,t){c.arrLibraryUrls=[],c.arrLibraryType=[],c.arrLibraryDivs.forEach(function(e,i){e.remove()}),c.arrLibraryDivs=[],is(e)&&e.forEach(function(e,i){c.insertLibrary(e,t[i])})},this.setFilePanel=function(e,i,t,n,o,r){this.elTitleBox.value(e),is(i)&&this.elDescriptionBox.value(i),c.date=t,l.html(c.date),c.fileIndex=n,c.refreshLibraryUrls(o,r)},this.onItemClicked;var t=input().width("90%").type("text").name("").placeHolder("search").required(!1);block(t),space(4);var h=ul({"list-style-type":"none"}).width("93%").fontSize("0.8em").textAlign("left").bgColor("white").color("#777").padding(0,0,0,2).margin(0,0,0,4);addTapEvent(function(e){0==h.element.contains(e.target)&&h.empty()}),t.element.onkeyup=function(e){var s=t.element.value;s.length<1?h.empty():ajax("https://api.cdnjs.com/libraries?search="+s,null,!1,function(e){h.empty();var n=[],o=[],t=[];d={};var r,l=e.total,a=e.results;for(i=0;i<l&&i<20;i++)d[a[i].name]=a[i].latest;if(0<s.length)for(key in d)key.includes(s)&&(n.push(key),o.push(d[key]),r=li(key).normal({"background-color":"#eee",color:"blue"}),h.append(r),t.push(r));t.forEach(function(e,t){e.onclick(function(){var e=getFileExtention(o[t]),i=0;is(e)&&"js"!=e&&(i=1),c.insertLibrary(o[t],i),is(c.onItemClicked)&&c.onItemClicked(n[t],o[t])})})},null,null,!1)},block(h),this.elMain=mainBlock()}function finder(e,t){this.finderPanel=div();var d=new popupMenu(e,null,t,1),n={border:"1px solid #333",padding:"6px 14px"};d.items.forEach(function(e,i){e.css(n),e.normal({"background-color":"white",color:"black"}),e.hovered({"background-color":"#f60",color:"white"})}),d.menuDiv.css({"background-color":"white",color:"black"}),this.menu=d,this.editingFileName,this.editingTitleDiv,this.editingFileDate,this.editingFileIndex,this.editingButtonIndex,this.selectedFileName,this.selectedFileDate,this.selectedFileIndex,this.selectedFinderIndex,this.selectedTitleDiv=null;var h=0,u=this;this.arrTitleDivs=[],this.arrFileDivs=[],this.arrDBFileIndexes=[];var p=null;this.init=function(){d.editButtons=[],u.arrTitleDivs=[],u.arrDBFileIndexes=[],u.arrFileDivs=[],this.finderPanel.empty()},this.deleteItem=function(e){d.editButtons.length>e&&d.editButtons.splice(e,1),u.arrTitleDivs.length>e&&u.arrTitleDivs.splice(e,1),u.arrDBFileIndexes.length>e&&u.arrDBFileIndexes.splice(e,1),u.arrFileDivs.length>e&&(u.arrFileDivs[e].remove(),u.arrFileDivs.splice(e,1))},this.getFinderIndex=function(e){var t=0;for(i=0;i<this.arrTitleDivs.length;i++){if(this.arrTitleDivs[i]==e)return t;t++}return-1},this.getSelectedFinderIndex=function(){return this.getFinderIndex(this.selectedTitleDiv)},this.hover=function(e,i){0!=is(e)&&(i?u.selectedTitleDiv!=e&&(e.bgColor("mediumseagreen"),e.color("yellow")):u.selectedTitleDiv!=e&&(e.removeCss("background-color"),e.color("white")))},this.select=function(e,i,t,n,o){var r;0!=is(u.arrTitleDivs)&&0!=u.arrTitleDivs.length&&(0==is(e)&&(e=u.arrTitleDivs.length-1),e>=u.arrTitleDivs.length&&(e=u.arrTitleDivs.length-1),i?(u.selectedFinderIndex<u.arrTitleDivs.length&&(r=u.arrTitleDivs[u.selectedFinderIndex],is(r)&&(r.removeCss("background-color"),r.color("white"))),u.selectedFinderIndex=e,u.selectedTitleDiv=u.arrTitleDivs[e],is(u.selectedTitleDiv)&&(u.selectedTitleDiv.removeCss("background-color"),u.selectedTitleDiv.bgColor("dodgerblue"),u.selectedTitleDiv.color("yellow"),u.selectedFileName=t,u.selectedFileDate=n,u.selectedFileIndex=o)):((r=u.arrTitleDivs[e]).removeCss("background-color"),r.color("white")))},this.edit=function(e,i){0!=is(e)&&(i?u.selectedTitleDiv!=e&&(e.bgColor("mediumseagreen"),e.color("yellow")):u.selectedTitleDiv!=e&&(e.removeCss("background-color"),e.color("white")))},this.insertItem=function(e,i,t,n,o){0==is(o)&&(o=-1);var r=++h-1,l=div({"font-size":"0.7em"}).floatLeft().marginLeft(3);is(n)?l.html(t+fxAddColorSpan(" "+n,{"#ddd":n},"0.6em")):l.html(t),l.onclick(function(){i(e),u.select(e,!0,t,n,o)});var a=icon_File(11.6,14.8,function(e){}).floatLeft().marginTop(0),s=icon_Edit(12.8,12.8,function(){d.showMenu(!0,s),is(p)&&u.edit(p,!1),p=l,u.editingTitleDiv=l,u.edit(l,!0),u.editingFileName=t,u.editingFileDate=n,u.editingFileIndex=o,u.editingButtonIndex=r}).floatRight().marginTop(2);d.editButtons.push(s),s.onhover(function(e){0==d.bShowMenu&&(e?u.hover(l,!0):u.hover(l,!1))}),u.arrTitleDivs.push(l),u.arrDBFileIndexes.push(o),0==is(d.func_show)&&(d.func_show=function(e){0==e&&u.arrTitleDivs.forEach(function(e,i){u.edit(e,!1)})});var c=div().textAlign("left").clearBoth();return l.onhover(function(e){0==d.bShowMenu&&(e?u.hover(l,!0):u.hover(l,!1))}),c.append(a,l,s),u.arrFileDivs.push(c),this.finderPanel.append(c),l}}function popupMenu(t,e,i,n){this.n1Left2Center3Right_=2,is(n)&&(this.n1Left2Center3Right_=n),this.editButtons=[],this.items=[],this.menuDiv=div({display:"none",position:"fixed","z-index":"30"}),this.bShowMenu=!1,this.func_show=e;var o=this.menuDiv,r=this.items;this.showMenu=function(e,i){var t;e?(this.menuDiv.show(),t=i.rect(),1==this.n1Left2Center3Right_?this.menuDiv.left(t.left-(this.menuDiv.width()-.5*i.width())):3==this.n1Left2Center3Right_?this.menuDiv.left(t.left):this.menuDiv.left(t.left-.5*(this.menuDiv.width()-i.width())),this.menuDiv.top(t.top+.5*i.height())):this.menuDiv.hide(),this.bShowMenu=e,is(this.func_show)&&this.func_show(this.bShowMenu)};var l=this;i.forEach(function(e,i){e=div(e).onclick(function(e){t(i),l.showMenu(!1,null)});r.push(e),o.append(e)}),addTapEvent(function(t){var n;0==l.menuDiv.element.contains(t.target)&&(n=!1,l.editButtons.forEach(function(e,i){e.element.contains(t.target)&&(n=!0)}),0==n&&l.bShowMenu&&l.showMenu(!1,null))}),this.menuDiv.toBody()}function createWaitingPopUpDiv(){var i=div("100%","100%").bgColor("#00000011").fixed(),t=div("waiting..").absolute().color("white");i.append(t),this.m_bShow=!1;var n=0;return this.show=function(e){e?(this.m_bShow=!0,n++,i.toBody(),i.center(),i.top(),i.css({top:.5*(window.innerHeight-i.height())+"px",left:.5*(window.innerWidth-i.width())+"px"}),t.css({top:.5*(i.height()-t.height())+"px",left:.5*(i.width()-t.width())+"px"})):(this.m_bShow=!1,0==--n&&i.remove())},this}var g_elWaitingPopUp=new createWaitingPopUpDiv;function ButtonPopUp(e,i,t,n,o,r){is(o)&&o&&addTapEvent(function(e){0==l.contains(e.target)&&l.hide()});var l=div({"background-color":"white",position:"absolute",border:"1px solid #000","z-index":"50"});this.show=function(e){0==is(e)&&(e=!0),e?(l.show(),l.align(i,r)):l.hide()},e.remove(),l.append(e),l.toBody(),l.size(t,n),this.show(!1);return fxAddRearrangUIFunction(function(e){l.center()}),this}function Modal(e,i,t,n,o){o&&addTapEvent(function(e){0==l.contains(e.target)&&0==i.contains(e.target)&&r.contains(e.target)&&r.hide()});var r=div({position:"absolute","z-index":"100",width:"100%",height:"100%","background-color":"#000000cc"}),l=div({"background-color":"white",position:"absolute",border:"1px solid #000"});return this.show=function(e){0==is(e)&&(e=!0),e?(r.show(),l.center()):r.hide()},e.remove(),l.append(e),r.append(l),r.toBody(),l.size(t,n),l.center(),this.show(!1),fxAddRearrangUIFunction(function(e){l.center()}),this}function myAlert(e,i,t,n,o){return new myAlertModal(e,i,260,140,!1,t,n,o,!0,40,!0)}function myAlertModal(e,i,t,n,o,r,l,a,s,c,d){this.rearrangeUI_=function(){f.center(),w.left(.5*(v.width()-w.width())),b.left(v.width()+.5*(m.width()-b.width()))},this.show=function(e){0==is(e)&&(e=!0),e?(p.show(),this.rearrangeUI_()):p.hide()},this.title=function(e){g.text(e)},d&&addTapEvent(function(e){0==f.contains(e.target)&&p.contains(e.target)&&p.hide()});size(t,n);var h={"background-color":"white",height:"70%"},u={"background-color":"#f8f8f8","border-top":"1px solid #e6e6e6",height:"40px"},d={float:"left",width:"49.5%",height:"40px"},t={float:"right",width:"49.5%",height:"40px"},n={"word-break":"break-all","word-wrap":"break-word","text-align":"center",padding:screen.width<700?"30px 40px":"30px 80px"},p=div({position:"fixed","z-index":"100",width:"100%",height:"100%",top:"0px",left:"0px","background-color":"#00000033"}),f=div({"background-color":"white",position:"absolute",border:"1px solid #000","max-width":"80%","max-height":"80%","min-width":"220px"}),h=div(h),u=div(u),v=div(d),m=div(t),g=div(n);g.text(r);var b=button(e,"OK").absolute(),w=button(i,"Cancel").absolute();a&&(v.append(w),w.bottom(10.4)),l&&(m.append(b),b.bottom(10.4)),u.append(v,m),h.append(g),f.append(h,u),p.append(f),p.toBody(),this.show(!1);var x=this;fxAddRearrangUIFunction(function(e){x.rearrangeUI_()})}function template_signUp(e,c,d,h,p){function f(e,i,t,n){return e.length<t?(alert(i+" must be longer than "+t+" characters"),!1):!(e.length>=n)||(alert(i+" must be shorter than "+n+" characters"),!1)}return function(e,i){initBlocks(),autoColor(!1),autoAppend(!1);var t,n="97.6%",o="100%";0==i&&(block("Your Name"),space(1),block(30),t=input(n,o).type("text").name("name").placeHolder("").required(!0),item(t),space(),space(26)),block("ID"),space(1),block(30);var r,l=input(n,o).type("text").name("id").placeHolder("").required(!0);item(l),space(),space(9),0==i&&block(10.4,"jsmation.com/id").fontSize("0.6em").color("#bbb"),0==i&&(space(26),block("Email"),space(1),block(30),r=input(n,o).type("text").name("email").placeHolder("").required(!0),item(r),space()),space(26),block("Password"),space(1),block(30);var a=input(n,o).type("password").name("password").placeHolder("").required(!0);item(a),space(),0==i?(space(26),block("Confirm Password"),space(1),block(30),o=input(n,o).type("password").name("confirm_password").placeHolder("").required(!0),item(o)):(space(1),space(),block(27),space(),s=input().margin(0,5,0,0).type("checkbox").name("remember_me").placeHolder("").required(!1),item(s),item("remember me").fontSize("0.6em").color("#444")),space(),space(28.6),block(30);var s=roundButton(function(e){is(c)&&c()},!1,36,5,i?"Sign in":"Sign up").border(2,"black").color("white").bgColor("dodgerblue").fontSize("0.9em").normal({"background-color":"blue",color:"yellow","border-color":"#333"});return item(s),(s=roundButton(function(e){is(d)&&d()},!1,36,5,"Cancel")).border(2,"black").color("white").bgColor("dodgerblue").fontSize("0.9em"),s.normal({"background-color":"blue",color:"yellow","border-color":"#333"}),s.floatRight(),item(s),space(),space(39),block(30),(s=u(i?"Sign up":"Sign in").onclick(function(e){is(h)&&h()})).height("20px").fontSize("0.9em").floatLeft().marginLeft(4).normal({"background-color":"blue",color:"#0"}),item(s),space(26),c_mainFrom={margin:"30px 32px 30px 24px",position:"relative","font-size":"1.2em"},(s=form({},{method:"post",action:p})).element.onsubmit=function(){return(0!=i||0!=f(t.element.value,"YourName",3,40))&&(0!=f(l.element.value,"id",3,20)&&(0!=f(a.element.value,"password",6,20)&&(0!=i||0!=f(r.element.value,"email",5,50))))},isUndefined(e)?e=mainBlock(s,c_mainFrom):mainBlock(e),e.fontFamily("verdana"),e}(void 0,e)}